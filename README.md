# MacReleaser

macOS app release automation tool - automate build, sign, notarize, and release process for macOS applications.

## Overview

MacReleaser is a specialized release automation tool focused exclusively on releasing Developer ID signed macOS applications built using Xcode. Inspired by goreleaser, but purpose-built for the macOS app ecosystem.

## Features

- **Build Automation**: Integration with `xcodebuild` for building archives
- **Code Signing & Notarization**: Automated code signing and Apple notarization
- **Distribution Formats**: `.app` bundles, `.dmg` disk images, `.zip` archives
- **Release Management**: GitHub releases with automatic asset uploads
- **Homebrew Integration**: Automatic cask generation and tap management

## Quick Start

### Installation

```bash
# Build from source
git clone https://github.com/macreleaser/macreleaser.git
cd macreleaser
make install
```

### Basic Usage

1. **Generate configuration**:
   ```bash
   macreleaser init
   ```

2. **Edit the configuration** (`.macreleaser.yaml`):
   ```yaml
   project:
     name: "MyApp"
     scheme: "MyApp"
   build:
     configuration: "Release"
   sign:
     identity: "Developer ID Application: Your Name (TEAM_ID)"
   notarize:
      apple_id: env(APPLE_ID)
      team_id: env(TEAM_ID)
      password: env(APPLE_APP_SPECIFIC_PASSWORD)
   ```

3. **Validate configuration**:
   ```bash
   macreleaser check
   ```

4. **Release**:
   ```bash
   macreleaser release
   ```

## Configuration

MacReleaser uses a YAML configuration file (`.macreleaser.yaml`) to define your release process. See the example configuration generated by `macreleaser init` for all available options.

### Environment Variables

MacReleaser supports environment variable substitution using `env(VAR_NAME)` syntax:

```yaml
notarize:
  apple_id: env(APPLE_ID)
  team_id: env(TEAM_ID)
  password: env(APPLE_APP_SPECIFIC_PASSWORD)
```

Notes:
- `env(...)` is only substituted in YAML values (not keys).
- Unset variables are left as literals at config load time and validated when the corresponding pipe runs. This allows commands like `build --skip-notarize` to work without Apple credentials set.
- Multiline values are allowed (for example, with literal blocks).

## Commands

- `macreleaser init` - Generate example configuration
- `macreleaser check` - Validate configuration file
- `macreleaser build` - Build, archive, and package project
  - `--skip-notarize` - Skip notarization for quick local pipeline validation
- `macreleaser release` - Full release process (build, sign, notarize, archive, GitHub release, Homebrew cask)
- `macreleaser snapshot` - Test build with snapshot version (falls back to timestamp if no git tags)
  - `--skip-notarize` - Skip notarization for quick local pipeline validation

## Requirements

- macOS 10.15 or later
- Xcode and Xcode Command Line Tools
- Go 1.21 or later (for building)

## Contributing

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## Roadmap

See [`docs/PLAN.md`](docs/PLAN.md) for detailed implementation plans and milestones.
